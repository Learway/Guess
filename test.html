<!DOCTYPE html>
<html lang="fr">
<head>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6152686855196540"
     crossorigin="anonymous"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bingo Foot</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #f3f4f6;
      padding: 1rem 2rem;
    }
    .bingo-board {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .cell {
      width: 100px;
      height: 80px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 0.85rem;
      word-wrap: break-word;
      background: white;
      border-radius: 1rem;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: background 0.3s;
    }
    
.cell {
  width: 100px;
  height: 100px;
  flex-direction: column;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
  margin-bottom: 0.4rem;
  display: block;
}

    
.cell {
  width: 100px;
  height: 100px;
  flex-direction: column;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
  margin-bottom: 0.4rem;
  display: block;
}

    .cell.correct {
      background: #4ade80;
      color: white;
    }
    .cell.wrong {
      background: #f87171;
      color: white;
    }
    .player-img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .button {
      background: #3b82f6;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease, opacity 0.3s ease;
    }
    .button:hover {
      background: #2563eb;
    }
        h2 {
      margin-bottom: 1rem;
    }
    .info {
      margin-bottom: 1rem;
      font-weight: bold;
    }
  
.menu-container {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 1000;
}
.menu-toggle {
  background: #3b82f6;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  cursor: pointer;
  font-size: 1.2rem;
  user-select: none;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.menu {
  display: none;
  flex-direction: column;
  background: white;
  margin-top: 0.5rem;
  border-radius: 0.5rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  overflow: hidden;
}
.menu a {
  padding: 0.75rem 1rem;
  text-decoration: none;
  color: #111827;
  font-weight: bold;
  border-bottom: 1px solid #e5e7eb;
}
.menu a:hover {
  background: #f3f4f6;
}
.menu a:last-child {
  border-bottom: none;
}

.logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
  margin-bottom: 0.4rem;
  display: block;
}

</style>
</head>
<body>
<div class="menu-container">
  <div class="menu-toggle" onclick="toggleMenu()">☰</div>
  <div class="menu" id="dropdown-menu">
    <a href="devine.html">Devine le Joueur</a>
    <a href="championleague.html">Ligue des Champions</a>
    <a href="cdm.html">Coupe du Monde</a>
    <a href="ballondor.html">Ballon d'Or</a>
    <a href="quiz.html">Quiz Foot</a>
    <a href="bingo.html">Bingo</a>
  </div>
</div>

  <h2>Bingo Foot</h2>
  <p id="player-name" style="font-weight:bold; font-size: 1.1rem; margin-bottom: 0.5rem;"></p>
  <div class="info" id="remaining"></div>
  <div class="bingo-board" id="bingo-board"></div>
  <div style="display: flex; justify-content: center; margin-top: 1rem;">
    <button class="button" id="next-button">Suivant</button>
  </div>
  <p id="end-message" style="display:none; font-weight:bold; color:#f87171; margin-bottom:1rem;">
    Fin du jeu : tu n'as pas rempli tout le bingo.
  </p>
  <script>
    const logoMap = {
  "Ligue des Champions": "logos/liguedeschampions.png",
  "Coupe du Monde": "logos/coupedumonde.png",
  "Euro": "logos/euro.png",
  "Copa América": "logos/copaamerica.png",
  "CAN": "logos/can.png",
  "Premier League": "logos/premierleague.png",
  "Liga": "logos/liga.png",
  "Serie A": "logos/seriea.png",
  "Bundesliga": "logos/bundesliga.png",
  "Juventus": "logos/juventus.png",
  "PSG": "logos/psg.png",
  "Chelsea": "logos/chelsea.png",
  "Barcelone": "logos/barcelone.png",
  "Real Madrid": "logos/realmadrid.png",
  "AC Milan": "logos/acmilan.png",
  "Manchester United": "logos/manchesterunited.png",
  "Liverpool": "logos/liverpool.png",
  "Arsenal": "logos/arsenal.png",
  "Bayern": "logos/bayern.png",
  "Inter Milan": "logos/intermilan.png",
  "Ballon d'Or": "logos/ballondor.png",
  "Europa League": "logos/europaleague.png",
  "Atletico Madrid": "logos/atleticomadrid.png",
  "Ligue 1": "logos/ligue1.png",
  "Sporting CP": "logos/sporting.png",
  "Porto FC": "logos/porto.png",
  "Napoli": "logos/napoli.png",
  "Tottenham": "logos/tottenham.png",
  "Sevilla": "logos/sevilla.png"
  
};
let data;
    let bingoCells = [];
    let playerPool = [];
    let currentPlayerIndex = 0;

    async function init() {
      const res = await fetch('data.json');
      data = await res.json();

      const allCategories = [...data.categories];
      const allPlayers = [...data.players];

      const { selectedCategories, selectedPlayers } = selectValidBingo(allCategories, allPlayers);

      const board = document.getElementById('bingo-board');
      board.innerHTML = '';
      bingoCells = [];

      selectedCategories.forEach(cat => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        const img = document.createElement('img');
        img.src = logoMap[cat] || '';
        img.alt = '';
        img.className = 'logo';
        const span = document.createElement('span');
        span.textContent = cat;
        cell.innerHTML = '';
        cell.appendChild(img);
        cell.appendChild(span);
        cell.dataset.category = cat;
        cell.addEventListener('click', () => checkCategory(cell));
        board.appendChild(cell);
        bingoCells.push(cell);
      });

      playerPool = selectedPlayers;
      currentPlayerIndex = 0;
      showPlayer();
    }

    function selectValidBingo(categories, players) {
      for (let i = 0; i < 1000; i++) {
        const selectedCategories = categories.sort(() => 0.5 - Math.random()).slice(0, 16);
        const filteredPlayers = players.filter(p => selectedCategories.some(cat => p.achievements.includes(cat)));
        const selectedPlayers = filteredPlayers.sort(() => 0.5 - Math.random()).slice(0, 30);

        const catCounts = {};
        selectedCategories.forEach(cat => catCounts[cat] = 0);
        selectedPlayers.forEach(p => {
          selectedCategories.forEach(cat => {
            if (p.achievements.includes(cat)) catCounts[cat]++;
          });
        });

        const valid = Object.values(catCounts).every(c => c >= 2);
        if (valid) {
          return { selectedCategories, selectedPlayers };
        }
      }
      alert("Erreur : impossible de trouver une combinaison valide.");
      return { selectedCategories: [], selectedPlayers: [] };
    }

    const showImages = false;

    function showPlayer() {
      if (currentPlayerIndex >= playerPool.length) {
      document.getElementById('remaining').textContent = `Joueurs restants : 0`;
        const correctCount = document.querySelectorAll('.cell.correct').length;
        const nextBtn = document.getElementById('next-button');

        if (correctCount === 16) {
          alert("Bravo ! Tu as rempli le Bingo !");
        } else {
          document.getElementById('end-message').style.display = 'block';
        }

        nextBtn.textContent = 'Recommencer';
          nextBtn.style.background = '#10b981';
          nextBtn.onclick = () => {
            nextBtn.textContent = 'Suivant';
            nextBtn.style.background = '#3b82f6';
            document.getElementById('end-message').style.display = 'none';
            init();
          };

        return;
      }

      const player = playerPool[currentPlayerIndex];
      document.getElementById('player-name').textContent = player.name;
      document.getElementById('remaining').textContent = `Joueurs restants : ${playerPool.length - currentPlayerIndex}`;
    }

    function checkCategory(cell) {
      if (cell.classList.contains('correct')) return;

      const player = playerPool[currentPlayerIndex];
      const category = cell.dataset.category;

      if (player.achievements.includes(category)) {
        cell.classList.add('correct');
        currentPlayerIndex++;
        showPlayer();
      } else {
        cell.classList.add('wrong');
        setTimeout(() => {
          cell.classList.remove('wrong');
          currentPlayerIndex++;
          showPlayer();
        }, 500);
      }
    }

    document.getElementById('next-button').onclick = () => {
      currentPlayerIndex++;
      showPlayer();
    };

    init();
  </script>

<script>
  function toggleMenu() {
    const menu = document.getElementById("dropdown-menu");
    menu.style.display = menu.style.display === "flex" ? "none" : "flex";
  }
</script>
<script src="ads.js"></script>
</body>
</html>